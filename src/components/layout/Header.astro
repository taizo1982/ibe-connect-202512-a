---
import { Image } from 'astro:assets';
import Button from '../common/Button.astro';
import event from '../../data/event.json';
import logo from '../../assets/images/logo.png';
import logoWhite from '../../assets/images/logo-white.png';
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16 md:h-18">
      <a href="#" class="flex items-center gap-2 relative">
        <Image src={logoWhite} alt="I be connect" class="header-logo-white h-8 md:h-10 w-auto transition-opacity duration-300" />
        <Image src={logo} alt="I be connect" class="header-logo-dark h-8 md:h-10 w-auto transition-opacity duration-300 absolute opacity-0" />
      </a>

      <Button href={event.entryUrl} size="small">
        申し込む
      </Button>
    </div>
  </div>
</header>

<script>
  const header = document.getElementById('header');
  const logoWhite = document.querySelector('.header-logo-white');
  const logoDark = document.querySelector('.header-logo-dark');

  const updateHeader = () => {
    if (window.scrollY > 50) {
      header?.classList.add('bg-white/95', 'backdrop-blur-md', 'shadow-sm');
      logoWhite?.classList.add('opacity-0');
      logoDark?.classList.remove('opacity-0');
    } else {
      header?.classList.remove('bg-white/95', 'backdrop-blur-md', 'shadow-sm');
      logoWhite?.classList.remove('opacity-0');
      logoDark?.classList.add('opacity-0');
    }
  };

  window.addEventListener('scroll', updateHeader);
  updateHeader();
</script>

<style>
  .shadow-sm {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  }
</style>
